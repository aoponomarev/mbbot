# Дневной лог разработки - 13 декабря 2025

## UI (оформление)

## UX (паттерны взаимодействий)

## MM (математическая модель)

## Architect (архитектура, настройки)

### Коммит: Start of day: 12-13
- **Что сделано**: Открыт новый рабочий день 13 декабря 2025
- **Как сделано**:
  * Проведена проверка документации проекта (`.cursorrules`, `architect.md`, `ui/guide-ii.md`)
  * Проверено состояние репозитория (чистое рабочее дерево, синхронизировано с `origin/master`)
  * Проверены текущие версии зависимостей (Vue.js 3.5.25, Bootstrap 5.3.8, Font Awesome 6.5.1)
  * Добавлено правило об обязательном создании открывающего коммита при открытии нового рабочего дня в `.cursorrules`
  * Создан файл дневного лога `history/2025/12-13.txt`
  * Обновлен `lastCommitMessage` в `core/cfg-app.js` на "Start of day: 12-13"
- **Функциональность**: Зафиксировано начало рабочего дня в истории репозитория, обеспечена преемственность документации и правил работы ИИ-агента

### Коммит: Systematize component patterns and approaches
- **Что сделано**: Агрегированы и систематизированы все подходы к компонентам, сформированные за день
- **Как сделано**:
  * Добавлен раздел "Паттерны универсальных компонентов" в `architect.md` с подробным описанием:
    - Компонент `menu-item` (пункт меню) - структура, props, использование
    - Компонент `dropdown-menu` (выпадающее меню) - структура, props, события, клавиатурная навигация
    - Паттерн интеграции компонентов - правила использования универсальных компонентов
    - Стилизация фокуса через рутовые переменные - общая переменная `--color-focus-bg`
    - Единообразные стили пунктов меню - правила стилизации для консистентности
  * Добавлен раздел "Универсальные компоненты меню" в `ui/guide-ii.md` с описанием:
    - Структура и стилизация компонента `menu-item`
    - Клавиатурная навигация и управление курсором в `dropdown-menu`
    - Правила использования универсальных компонентов
  * Обновлен раздел "Доступность" в `ui/guide-ii.md` с информацией о клавиатурной навигации и управлении курсором
  * Обновлены описания компонентов в разделе "Текущее размещение файлов" в `architect.md` со ссылками на новый раздел
- **Функциональность**: Обеспечена полная систематизация и документация всех подходов к компонентам, сформированных за день, для использования в будущих сессиях разработки

### Коммит: Implement universal menu components (menu-item and dropdown-menu)
- **Что сделано**: Реализованы универсальные компоненты меню и их интеграция во все выпадающие меню приложения
- **Как сделано**:
  * Создан компонент `ui/components/menu-item.js` - универсальный компонент пункта меню с иконкой, командой и индикатором
  * Создан компонент `ui/components/dropdown-menu.js` - универсальный компонент выпадающего меню с клавиатурной навигацией
  * Интегрированы компоненты во все выпадающие меню: счетчик, поиск, архив, контекстное меню, меню сортировки
  * Реализована стилизация фокуса через общую рутовую переменную `--color-focus-bg` для единообразия с выбранными строками таблицы
  * Добавлен prop `trigger-selector` в `dropdown-menu` для автоматической установки `cursor: pointer` на элементах-триггерах
  * Обновлены стили пунктов меню: паддинги на `<span>` элементах, фиксированные ширины для иконок и индикаторов
  * Обновлен `icons-helper.js` для синхронной загрузки иконок (встроен JSON для работы с file://)
  * Расширен `icons-mapping.json` с поддержкой индикаторов (status, navigation)
  * Зарегистрированы компоненты в `app-ui-root.js`
- **Функциональность**: Обеспечено единообразие всех выпадающих меню в приложении, полная клавиатурная навигация, автоматическое управление курсором триггеров, единый стиль фокуса

### Коммит: Add rule for commit hash requests in daily log
- **Что сделано**: Добавлено правило о просьбах добавить хеш коммита в дневной лог
- **Как сделано**:
  * Добавлено правило в раздел "ОБЯЗАТЕЛЬНЫЙ ЧЕКЛИСТ ПЕРЕД КАЖДЫМ КОММИТОМ" в `.cursorrules`
  * Правило запрещает изменение дневного лога при просьбах добавить хеш коммита (фразы типа "добросить", "добавить хеш")
  * ИИ-агент должен объяснять, что хеши добавляются только при завершении рабочего дня во время ревизии
  * Исправлено дублирование строки "**Что сделано**" в дневном логе
- **Функциональность**: Предотвращает появление незакоммиченных изменений в дневном логе при просьбах добавить хеш коммита, исключает циклические зависимости

### Коммит: Improve dropdown menu spacing and styling
- **Что сделано**: Улучшена стилизация выпадающих меню и элементов формы: отрицательный гэп между пунктами меню, видимые divider, улучшена стилизация фокуса для чекбоксов и полей ввода
- **Как сделано**:
  * Добавлен отрицательный гэп `-0.5rem` между пунктами меню для более компактного вида
  * Настроены стили divider: `padding-top: 1rem`, `margin: 0.5rem 1rem calc(-1rem - 1px) 1rem` для правильного позиционирования и просвечивания через фон пунктов
  * Divider сделан видимым с `opacity: 0.7` и просвечивает через прозрачный фон пунктов меню (`background-color: transparent`)
  * Восстановлена подсветка при наведении через `var(--color-focus-bg)` для более прозрачной подсветки
  * Убран класс `my-0` из divider в `index.html` (перебивал стили)
  * Убран autofocus с последующим blur в `dropdown-menu.js` для предотвращения выделения первого пункта
  * Убраны все кастомные стили фокуса для чекбоксов, возвращены дефолтные Bootstrap стили (скругленные фокусные рамки)
  * Добавлены глобальные стили фокуса для всех полей ввода (`.form-control:focus`, `.form-select:focus`) с светло-синей обводкой `hsl(210, 100%, 50%)`
  * Отключена тень фокуса для чекбоксов в заголовке таблицы (`th.col-checkbox .form-check-input:focus { box-shadow: none; }`)
- **Функциональность**: Выпадающие меню стали более компактными, divider видимые и просвечивают через фон пунктов, подсветка при наведении более прозрачная. Чекбоксы используют нативные Bootstrap стили со скруглениями, поля ввода имеют светло-синюю обводку при фокусе

