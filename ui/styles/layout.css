/* Общие стили layout */

/* Глобально: вертикальная полоса прокрутки всегда видна для предотвращения "дергания" интерфейса */
html {
    overflow-y: scroll;
    /* Запрещаем горизонтальную прокрутку на уровне страницы */
    overflow-x: hidden;
}

/* Глобально: скрываем горизонтальную полосу прокрутки везде, но разрешаем прокрутку через Shift + колесико мыши */
body {
    overflow-x: hidden;
}

/* Глобально: скрываем горизонтальную полосу прокрутки во всех контейнерах */
* {
    /* Для Firefox: скрываем горизонтальную полосу, но оставляем вертикальную */
    scrollbar-width: thin;
}

/* Для Webkit браузеров (Chrome, Safari, Edge): настраиваем полосы прокрутки */
*::-webkit-scrollbar {
    width: 12px;
    height: 0; /* Скрываем горизонтальную полосу прокрутки */
}

*::-webkit-scrollbar-track {
    background: transparent;
}

*::-webkit-scrollbar-thumb {
    background: transparent;
}

/* Стили для таблицы "Компл. дельты" */
.cdh-column {
  color: hsl(200, 44%, 55%);
  font-weight: bold;
}

[data-bs-theme="dark"] .cdh-column {
  color: hsl(200, 50%, 65%);
}

/* ВРЕМЕННО: Скрытие иконок направления сортировки (до лучших времен) */
.for-sorting i {
  display: none !important;
}

/* =========================
   ПЕРЕИСПОЛЬЗУЕМАЯ ФИЧА: УПРАВЛЕНИЕ ВИДИМОСТЬЮ КОЛОНОК ТАБЛИЦЫ ЧЕРЕЗ ВКЛАДКИ
   Используется mixin columnVisibilityMixin для мгновенного переключения видимости колонок
   ========================= */
/* Скрытие колонок через классы colgroup (для структуры) */
col.col-hidden {
  width: auto;
}

/* Скрытие ячеек (th и td) соответствующих скрытым колонкам */
/* Универсальное правило для всех таблиц: любая ячейка с классом col-hidden скрывается */
table th.col-hidden,
table td.col-hidden {
  display: none;
}

/* Восстанавливаем вертикальную полосу прокрутки */
*::-webkit-scrollbar:vertical {
    width: 12px;
}

*::-webkit-scrollbar-thumb:vertical {
    background: hsla(0, 0%, 0%, 0.2);
    border-radius: 6px;
}

*::-webkit-scrollbar-thumb:vertical:hover {
    background: hsla(0, 0%, 0%, 0.3);
}

[data-bs-theme="dark"] *::-webkit-scrollbar-thumb:vertical {
    background: hsla(0, 0%, 100%, 0.2);
}

[data-bs-theme="dark"] *::-webkit-scrollbar-thumb:vertical:hover {
    background: hsla(0, 0%, 100%, 0.3);
}

/* Для контейнеров с горизонтальной прокруткой (например, .table-responsive) - скрываем полосу, но разрешаем прокрутку */
.table-responsive,
[style*="overflow-x"],
[class*="overflow"] {
    overflow-x: auto !important;
    /* Скрываем горизонтальную полосу прокрутки */
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
}

.table-responsive::-webkit-scrollbar,
[style*="overflow-x"]::-webkit-scrollbar,
[class*="overflow"]::-webkit-scrollbar {
    height: 0; /* Скрываем горизонтальную полосу прокрутки */
}

/* Контейнер основного контента с учетом фиксированных хедера и футера */
/* Хедер фиксированный, высота 50px, нужен отступ сверху */
/* Футер фиксированный, нужен отступ снизу */
.container-fluid.app-main-container {
    padding-top: 60px;
    padding-bottom: 80px;
}

/* Основной контент: центрирование, адаптивность, ограничение ширины */
.avto-K9mP4rT {
    max-width: 1400px;
    margin: 0 auto;
    padding-left: 15px;
    padding-right: 15px;
}

/* Адаптивность для мобильных устройств */
@media (max-width: 576px) {
    .avto-K9mP4rT {
        padding-left: 10px;
        padding-right: 10px;
    }
}

/* Стили для выпадающего списка поиска монет CoinGecko */
.cg-search-item {
    cursor: pointer;
    transition: background-color 0.15s ease-in-out;
    /* Одинаковый цвет текста и иконок во всех состояниях */
    color: var(--bs-body-color);
}

.cg-search-item:hover {
    background-color: var(--bs-secondary-bg) !important;
    color: var(--bs-body-color);
}

.cg-search-item:active {
    background-color: var(--bs-tertiary-bg) !important;
    color: var(--bs-body-color);
}

.cg-search-item * {
    /* Все элементы внутри (текст, иконки) сохраняют одинаковый цвет */
    color: inherit;
}

/* Подсветка уже добавленных монет в списке поиска (тема-зависимая) */
.cg-search-item-selected {
    background-color: var(--bs-secondary-bg) !important;
    color: var(--bs-body-color);
}

/* Убираем border-bottom у последней строки таблицы */
.table tbody tr:last-child td {
    border-bottom: none !important;
}

/* Уменьшаем padding-bottom у карточки CoinGecko */
.avto-B7fN2kT .card-body {
    padding-bottom: 0.5rem !important;
}

/* Глобально: убираем зазор между низом таблицы и низом карточки */
.card-body > .table-responsive:last-child,
.card-body > .table:last-child {
    margin-bottom: 0 !important;
}

.card-body > .table-responsive:last-child > .table,
.card-body > .table:last-child {
    margin-bottom: 0 !important;
}

/* Кнопка счетчика монет */
.cg-coins-counter {
    /* Фиксированная ширина 3em */
    width: 3em;
    min-width: 3em;
    height: 3em;
    padding: 0;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    /* Прозрачный фон и рамки для всех состояний */
    background-color: transparent !important;
    border: none !important;
    color: var(--bs-body-color);
}

.cg-coins-counter:hover,
.cg-coins-counter:focus,
.cg-coins-counter:active,
.cg-coins-counter.active {
    background-color: transparent !important;
    border: none !important;
    color: var(--bs-body-color);
    box-shadow: none !important;
}

.cg-coins-counter:disabled {
    background-color: transparent !important;
    border: none !important;
    opacity: 0.5;
}

/* Круговая диаграмма (разорванное кольцо) */
.cg-counter-ring {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    pointer-events: none;
}

.cg-counter-ring-bg {
    color: var(--bs-body-color);
}

.cg-counter-ring-progress {
    /* Чистый Primary цвет (синий) без прозрачности */
    color: var(--bs-primary);
}

/* Число на кнопке */
.cg-coins-counter > span {
    position: relative;
    z-index: var(--z-index-overlay);
    font-weight: 600;
}

/* Выравнивание кнопки счетчика с чекбоксами в таблице */
/* Карточка с классом for-coinsindicator: регулируем левый паддинг хедера для выравнивания */
.card.avto-B7fN2kT.for-coinsindicator .card-header {
    /* Левый паддинг для выравнивания кнопки счетчика с центром чекбоксов */
    /* Чекбоксы находятся в первой колонке таблицы (width: 40px) */
    /* Центр чекбокса от левого края карточки: паддинг card-body (1rem) + половина ширины колонки (20px) = 1rem + 20px */
    /* Кнопка находится в начале хедера, центр кнопки от левого края хедера: 1.5em (половина ширины 3em) */
    /* Для выравнивания: padding-left хедера = (1rem + 20px) - 1.8em */
    /* Учитываем, что у хедера уже есть стандартный паддинг Bootstrap, поэтому переопределяем его */
    padding-left: calc(1rem + 20px - 1.8em) !important;
}

/* Регулировка ширины кнопки для точного выравнивания */
.card.avto-B7fN2kT.for-coinsindicator .cg-coins-counter {
    /* Ширина 3em для выравнивания центра кнопки с центром чекбокса */
    width: 3em;
    min-width: 3em;
}

/* Кнопка обновления CoinGecko: фиксированная ширина для предотвращения "прыжков" интерфейса */
.cg-update-btn {
    min-width: 3em;
    width: 3em;
}

/* На десктопе: ширина 7em для текста "Обновить" */
@media (min-width: 768px) {
.cg-update-btn {
    min-width: 7em;
    width: 7em;
    }
}

/* Кнопка архива CoinGecko: фиксированная ширина для мобильных */
.cg-archive-btn {
    min-width: 3em;
    width: 3em;
}

/* На десктопе: ширина по контенту для текста "Архив" */
@media (min-width: 768px) {
    .cg-archive-btn {
        min-width: auto;
        width: auto;
    }
}

/* Выделение числа отмеченных монет более контрастным цветом */
.cg-counter-selected {
    /* Используем дефолтный цвет текста Bootstrap, который адаптируется под тему (light/dark) */
    color: var(--bs-body-color);
    font-weight: 600; /* Полужирный для большей контрастности */
}

/* Кнопки в хедерах всех карточек: единый стиль без прозрачности */
.card-header .btn {
    /* Используем цвет secondary для фона (адаптируется под тему) */
    background-color: var(--bs-secondary-bg);
    border-color: var(--color-border);
    color: var(--bs-body-color);
    opacity: 1; /* Убираем любую прозрачность */
}


.card-header .btn:hover:not(:disabled) {
    /* В светлой теме - темнее при наведении */
    background-color: var(--color-button-hover);
    border-color: var(--color-border-hover);
    color: var(--bs-body-color);
}


.card-header .btn:focus:not(:disabled) {
    /* В светлой теме - темнее при фокусе */
    background-color: var(--color-button-hover);
    border-color: var(--color-border-hover);
    color: var(--bs-body-color);
    box-shadow: 0 0 0 0.25rem rgba(var(--bs-secondary-rgb), 0.25);
}


.card-header .btn:active:not(:disabled) {
    background-color: var(--bs-secondary-bg);
    border-color: var(--color-border);
    color: var(--bs-body-color);
}


.card-header .btn:disabled {
    background-color: var(--bs-secondary-bg);
    border-color: var(--color-button-disabled);
    color: var(--bs-secondary-color);
    opacity: 0.65; /* Стандартная прозрачность для disabled */
}


/* Текстовые инпуты в хедерах карточек: контрастные рамки как у кнопок */
.card-header .form-control {
    border-color: var(--color-border);
}


.card-header .form-control:focus {
    border-color: var(--color-border-hover);
    box-shadow: 0 0 0 0.25rem rgba(var(--bs-secondary-rgb), 0.25);
}


/* Селекты в хедерах карточек: контрастные рамки и hover эффекты */
.card-header .form-select {
    border-color: var(--color-border);
}


.card-header .form-select:hover {
    /* В светлой теме - темнее при наведении */
    background-color: var(--color-button-hover);
    border-color: var(--color-border-hover);
}


.card-header .form-select:focus {
    border-color: var(--color-border-hover);
    box-shadow: 0 0 0 0.25rem rgba(var(--bs-secondary-rgb), 0.25);
}


/* Глобальные стили для disabled полей ввода в темной теме */
/* Bootstrap по умолчанию применяет белый фон для disabled элементов, что плохо видно в темной теме */
[data-bs-theme="dark"] .form-control:disabled,
[data-bs-theme="dark"] .form-control[readonly] {
    background-color: var(--bs-secondary-bg) !important;
    color: var(--bs-secondary-color) !important;
    opacity: 0.65;
}

[data-bs-theme="dark"] .form-select:disabled {
    background-color: var(--bs-secondary-bg) !important;
    color: var(--bs-secondary-color) !important;
    opacity: 0.65;
}

[data-bs-theme="dark"] .form-check-input:disabled {
    background-color: var(--bs-secondary-bg) !important;
    opacity: 0.65;
}

/* =========================
   СТАНДАРТНЫЕ РАЗМЕРЫ ЧЕКБОКСОВ
   Все чекбоксы в проекте должны иметь единый стандартный размер 13x13px
   ========================= */
/* Фиксируем стандартные размеры и стили для всех чекбоксов */
/* Обеспечиваем единообразие внешнего вида всех чекбоксов в проекте */
.form-check-input {
    /* Стандартные размеры */
    width: 13px !important;
    height: 13px !important;
    min-width: 13px !important;
    min-height: 13px !important;
    max-width: 13px !important;
    max-height: 13px !important;
    /* Стандартные стили для единообразия */
    border-radius: 0.25rem !important;
    border: 1px solid var(--bs-border-color) !important;
    background-color: var(--bs-body-bg) !important;
    background-image: none !important;
    /* Убираем любые кастомные стили, которые могут перебивать стандартный вид */
    appearance: auto !important;
    -webkit-appearance: checkbox !important;
    -moz-appearance: checkbox !important;
    /* Фиксируем цвет для checked состояния */
    accent-color: var(--bs-primary) !important;
}

/* Состояния чекбокса для единообразия */
.form-check-input:checked {
    background-color: var(--bs-primary) !important;
    border-color: var(--bs-primary) !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10l3 3l6-6'/%3e%3c/svg%3e") !important;
}

.form-check-input:indeterminate {
    background-color: var(--bs-primary) !important;
    border-color: var(--bs-primary) !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10h8'/%3e%3c/svg%3e") !important;
}

.form-check-input:focus {
    border-color: var(--bs-primary) !important;
    box-shadow: 0 0 0 0.25rem rgba(var(--bs-primary-rgb), 0.25) !important;
}

/* =========================
   ЦВЕТИЗАЦИЯ ЧИСЛОВЫХ ЯЧЕЕК (cell-num)
   Автоматическая цветизация всех дочерних <span> элементов на основе знака значения
   ========================= */
/* Применяется к корневому элементу cell-num с классом num-coin-colorize */
/* Все дочерние <span> элементы получают цвет в зависимости от data-value-sign */
.num-coin-colorize[data-value-sign="positive"] > span {
    color: var(--color-success) !important;
}

.num-coin-colorize[data-value-sign="negative"] > span {
    color: var(--color-danger) !important;
}

.num-coin-colorize[data-value-sign="zero"] > span {
    color: var(--color-muted) !important;
}

/* Дополнительно для textarea */
[data-bs-theme="dark"] textarea.form-control:disabled,
[data-bs-theme="dark"] textarea.form-control[readonly] {
    background-color: var(--bs-secondary-bg) !important;
    color: var(--bs-secondary-color) !important;
    opacity: 0.65;
}

/* Цвет всех card-header: более стальной (темнее, в сторону стального серого с легким синеватым оттенком) */
.card-header {
    /* Стальной серый оттенок для светлой темы - темнее и с легким синеватым оттенком */
    background-color: var(--color-card-header);
    border-bottom-color: var(--color-card-header-border);
    /* Увеличенные вертикальные паддинги */
    padding-top: 0.75rem;
    padding-bottom: 0.75rem;
}

[data-bs-theme="dark"] .card-header {
    /* Стальной серый оттенок для темной темы - темнее и с легким синеватым оттенком */
    background-color: var(--color-card-header);
    border-bottom-color: var(--color-card-header-border);
}

/* Глобально для всех выпадающих списков: одинаковый цвет текста и иконок во всех состояниях */
.list-group-item-action {
    /* Дефолтный цвет текста, который не меняется при hover/active */
    color: var(--bs-body-color);
}

.list-group-item-action:hover:not(:disabled),
.list-group-item-action:focus:not(:disabled) {
    /* При hover/focus меняется только фон, цвет текста остается прежним */
    background-color: var(--bs-secondary-bg);
    color: var(--bs-body-color);
}

.list-group-item-action:active:not(:disabled) {
    background-color: var(--bs-tertiary-bg);
    color: var(--bs-body-color);
}

.list-group-item-action:disabled {
    color: var(--bs-secondary-color);
}

/* Иконки в выпадающих списках наследуют цвет текста */
.list-group-item-action i,
.list-group-item-action .fas,
.list-group-item-action .far,
.list-group-item-action .fa {
    color: inherit;
}

/* Исправление бага: подсветка для всех элементов в выпадающем списке счетчика монет */
/* ПРИМЕЧАНИЕ: Стили для .cg-counter-dropdown и .cg-context-menu удалены, */
/* так как эти меню мигрированы на компонент dropdown-menu */

/* Глобально для всех выпадающих меню внутри <main>: единый стиль с более контрастной рамкой и тенью */
/* ПРИМЕЧАНИЕ: Стили для .cg-counter-dropdown, .cg-search-dropdown, .cg-archive-dropdown, .cg-context-menu */
/* удалены, так как эти меню мигрированы на компонент dropdown-menu */
/* Остался только .cg-coin-sort-dropdown для меню сортировки в header-cell */
main .cg-coin-sort-dropdown {
    /* Z-index для dropdown меню (совпадает с Bootstrap) */
    z-index: var(--z-index-dropdown);
    /* Единый радиус скругления - 2.5px */
    border-radius: 2.5px !important;
    /* Более контрастная рамка */
    border: 1px solid var(--color-border) !important;
    /* Более контрастная тень */
    box-shadow: 0 4px 8px -2px hsla(0, 0%, 0%, 0.15), 0 2px 6px -1px hsla(0, 0%, 0%, 0.1) !important;
}

[data-bs-theme="dark"] main .cg-coin-sort-dropdown {
    /* Более контрастная рамка для темной темы */
    border-color: var(--color-dropdown-border-dark) !important;
    /* Более контрастная тень для темной темы */
    box-shadow: 0 4px 8px -2px hsla(0, 0%, 0%, 0.4), 0 2px 6px -1px hsla(0, 0%, 0%, 0.3) !important;
}

/* Кастомный цвет для бейджей неудачных тикеров (лучшая читабельность на светлом фоне) */
.badge.bg-warning-dark {
    background-color: var(--color-warning-dark) !important;
    color: var(--bs-white) !important;
}

/* Специальный класс для таблицы с монетами - убираем фон у строк и ячеек для видимости перемещения */
.cg-coins-table tbody tr,
.cg-coins-table tbody td {
    background-color: transparent !important;
}

.cg-coins-table thead th {
    background-color: transparent !important;
}

/* Подсветка выбранных строк таблицы с монетами - едва видимая прозрачная подсветка зеленовато-бирюзового цвета */
/* Используем общую рутовую переменную для консистентности с фокусом пунктов меню */
.cg-coins-table tbody tr.coin-row-selected,
.cg-coins-table tbody tr.coin-row-selected td {
    background-color: var(--color-focus-bg) !important;
}

/* Перекрываем все состояния (hover, nth-child) для выбранных строк */
.cg-coins-table tbody tr.coin-row-selected:hover,
.cg-coins-table tbody tr.coin-row-selected:hover td,
.cg-coins-table tbody tr.coin-row-selected:nth-child(even),
.cg-coins-table tbody tr.coin-row-selected:nth-child(even) td,
.cg-coins-table tbody tr.coin-row-selected:nth-child(odd),
.cg-coins-table tbody tr.coin-row-selected:nth-child(odd) td {
    background-color: var(--color-focus-bg) !important;
}

/* Для темной темы: используем те же параметры для консистентности */
[data-bs-theme="dark"] .cg-coins-table tbody tr.coin-row-selected,
[data-bs-theme="dark"] .cg-coins-table tbody tr.coin-row-selected td,
[data-bs-theme="dark"] .cg-coins-table tbody tr.coin-row-selected:hover,
[data-bs-theme="dark"] .cg-coins-table tbody tr.coin-row-selected:hover td,
[data-bs-theme="dark"] .cg-coins-table tbody tr.coin-row-selected:nth-child(even),
[data-bs-theme="dark"] .cg-coins-table tbody tr.coin-row-selected:nth-child(even) td,
[data-bs-theme="dark"] .cg-coins-table tbody tr.coin-row-selected:nth-child(odd),
[data-bs-theme="dark"] .cg-coins-table tbody tr.coin-row-selected:nth-child(odd) td {
    background-color: var(--color-focus-bg) !important;
}

/* Анимация перемещения строк таблицы при сортировке */
.coin-row-item {
    position: relative;
}

.coin-row-move {
    transition: transform 0.3s ease;
    z-index: 100; /* Высокий z-index для отображения поверх таблицы */
    transform: translateZ(0);
    will-change: transform;
    background-color: var(--bs-body-bg) !important; /* Фон для видимости перемещающейся строки */
}

.coin-row-enter-active,
.coin-row-leave-active {
    transition: opacity 0.3s ease, transform 0.3s ease;
    z-index: 100; /* Высокий z-index для отображения поверх таблицы */
    transform: translateZ(0);
    will-change: transform;
    background-color: var(--bs-body-bg) !important; /* Фон для видимости перемещающейся строки */
}

.coin-row-enter-from,
.coin-row-leave-to {
    opacity: 0;
}

[data-bs-theme="dark"] .badge.bg-warning-dark {
    background-color: var(--color-warning-dark) !important;
    color: var(--bs-black) !important;
}

/* Кастомный цвет для текста предупреждений о неудачных тикерах */
.text-warning-dark {
    color: var(--color-warning-dark) !important;
}

[data-bs-theme="dark"] .text-warning-dark {
    color: var(--color-warning-dark) !important;
}

/* Позиционирование панельки загрузки монет - верхний край вровень с верхней границей card-header */
.card-header .cg-loading-panel {
    /* Поднимаем панельку так, чтобы её верх был на уровне верхней границы card-header */
    /* form-control-sm имеет высоту ~31px, используем ex для более точного вертикального позиционирования */
    /* Значение скорректировано: уменьшаем подъем ещё на ~5px для точного выравнивания */
    margin-top: calc(-2.2rem + 0.45ex) !important;
    top: 100% !important;
}

