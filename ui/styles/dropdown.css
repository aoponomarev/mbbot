/* =========================
   КОМПОНЕНТ ВЫПАДАЮЩЕГО МЕНЮ (dropdown-menu)
   ========================= */

/* Базовые стили контейнера выпадающего меню */
.dropdown-menu-container {
    background-color: var(--bs-body-bg);
    border: 1px solid var(--color-border);
    /* Двойная тень: 1px для рамки + общая тень для слоя (шире и ниже, но не гуще) */
    box-shadow: 
        0 0 0 1px hsla(0, 0%, 0%, 0.05), /* 1px тень для рамки (более легкая) */
        0 12px 20px -4px hsla(0, 0%, 0%, 0.15), /* Еще ниже: увеличен offset-y */
        0 6px 14px -2px hsla(0, 0%, 0%, 0.1); /* Общая тень для слоя (еще ниже) */
    overflow: hidden; /* Важно: скрывает перекрытие скруглений */
}

/* Скругления 4px (стандарт для всех меню) */
.dropdown-menu-container.border-radius-small {
    border-radius: 4px;
}

/* Bootstrap дефолтные скругления (для хедера) */
.dropdown-menu-container.border-radius-default {
    border-radius: var(--bs-border-radius);
}

/* Пункты меню внутри - убираем скругления у первого и последнего */
.dropdown-menu-container .menu-item:first-child {
    border-top-left-radius: 0;
    border-top-right-radius: 0;
}

.dropdown-menu-container .menu-item:last-child {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
}

/* Подсветка пунктов не должна перекрывать скругления */
.dropdown-menu-container .menu-item:hover {
    /* Фон подсветки не должен выходить за границы скруглений */
    position: relative;
    z-index: 1;
}

/* Стиль фокуса пунктов меню - такой же как у выбранных строк таблицы */
.dropdown-menu-container .menu-item:focus,
.menu-item.list-group-item.list-group-item-action:focus {
    /* Убираем стандартную черную рамку Bootstrap */
    outline: none !important;
    box-shadow: none !important;
    /* Используем общую рутовую переменную для фона фокуса */
    background-color: var(--color-focus-bg) !important;
    /* Фон подсветки не должен выходить за границы скруглений */
    position: relative;
    z-index: 1;
}

/* Активное состояние пункта меню имеет приоритет над фокусом и ховером */
.dropdown-menu-container .menu-item.active,
.dropdown-menu-container .menu-item.active:hover,
.dropdown-menu-container .menu-item.active:focus {
    /* Яркий синий фон для активного пункта меню (стандартный Bootstrap blue) */
    background-color: hsl(210, 100%, 50%) !important;
    color: var(--bs-white) !important;
}

/* Убираем все границы между пунктами меню внутри выпадающего меню */
.dropdown-menu-container .menu-item {
    border: none !important;
    border-top: none !important;
    border-bottom: none !important;
    /* Отрицательный гэп между пунктами меню */
    margin-bottom: -0.5rem;
}

/* Последний пункт меню не должен иметь отрицательный margin */
.dropdown-menu-container .menu-item:last-child {
    margin-bottom: 0;
}

/* Divider между пунктами меню - тонкие светлые линии */
.dropdown-menu-container .dropdown-divider {
    padding-top: 1rem;
    margin: 0.5rem 1rem calc(-1rem - 1px) 1rem; /* top right bottom left - увеличен отрицательный bottom на 1px для скрытия линии */
    border-top: 1px solid var(--bs-border-color);
    opacity: 0.7; /* Более яркая линия */
    position: relative;
    z-index: 0; /* Divider под пунктами меню для просвечивания */
}

/* Инверсная тема для хедера */
.dropdown-menu-container.theme-inverse[data-bs-theme="dark"] {
    background-color: var(--color-dropdown-dark-bg);
    border: 1px solid var(--color-dropdown-dark-border);
    box-shadow: 
        0 0 0 1px hsla(0, 0%, 0%, 0.15), /* 1px тень для рамки (более легкая) */
        0 12px 16px -2px hsla(0, 0%, 0%, 0.3), /* Еще ниже: увеличен offset-y */
        0 6px 10px -2px hsla(0, 0%, 0%, 0.2); /* Общая тень для слоя (еще ниже) */
}

.dropdown-menu-container.theme-inverse[data-bs-theme="light"] {
    background-color: var(--color-dropdown-light-bg);
    border: 1px solid var(--color-dropdown-light-border);
    box-shadow: 
        0 0 0 1px hsla(0, 0%, 0%, 0.05), /* 1px тень для рамки (более легкая) */
        0 12px 16px -2px hsla(0, 0%, 0%, 0.1), /* Еще ниже: увеличен offset-y */
        0 6px 10px -2px hsla(0, 0%, 0%, 0.06); /* Общая тень для слоя (еще ниже) */
}

/* Стили для dropdown меню в хедере (инверсны включенной теме, идентичны для десктоп и мобильной версии) */

/* Стилизация селектов и dropdown кнопок */
.header-select {
    width: auto !important;
    max-width: 100%;
}

.header-select.dropdown-toggle::after {
    margin-left: 0.5rem;
}

/* Стилизация dropdown меню с инверсной темой (используются Bootstrap дефолтные border-radius) */
.app-header-dropdown-menu[data-bs-theme="dark"] {
    background-color: var(--color-dropdown-dark-bg);
    border: 1px solid var(--color-dropdown-dark-border);
    box-shadow: 0 4px 6px -1px hsla(0, 0%, 0%, 0.3), 0 2px 4px -1px hsla(0, 0%, 0%, 0.2);
    /* Используются Bootstrap дефолтные border-radius (var(--bs-border-radius)) */
}

.app-header-dropdown-menu[data-bs-theme="dark"] .dropdown-item {
    color: var(--color-dropdown-dark-text);
}

.app-header-dropdown-menu[data-bs-theme="dark"] .dropdown-item:hover,
.app-header-dropdown-menu[data-bs-theme="dark"] .dropdown-item.active {
    background-color: var(--color-dropdown-dark-overlay);
    color: var(--color-dropdown-dark-text);
}

.app-header-dropdown-menu[data-bs-theme="light"] {
    background-color: var(--color-dropdown-light-bg);
    border: 1px solid var(--color-dropdown-light-border);
    box-shadow: 0 4px 6px -1px hsla(0, 0%, 0%, 0.1), 0 2px 4px -1px hsla(0, 0%, 0%, 0.06);
    /* Используются Bootstrap дефолтные border-radius (var(--bs-border-radius)) */
}

.app-header-dropdown-menu[data-bs-theme="light"] .dropdown-item {
    color: var(--color-dropdown-light-text);
}

.app-header-dropdown-menu[data-bs-theme="light"] .dropdown-item:hover,
.app-header-dropdown-menu[data-bs-theme="light"] .dropdown-item.active {
    background-color: var(--color-dropdown-light-overlay);
    color: var(--color-dropdown-light-text);
}

/* =========================
   СТИЛИ ДЛЯ КОМПОНЕНТА ПУНКТА МЕНЮ (menu-item)
   ========================= */

/* ГЛОБАЛЬНОЕ ПРАВИЛО: Все элементы меню (menu-item) не имеют паддингов у ссылки */
/* Все отступы назначаются спанам внутри (.menu-item-main, .menu-item-indicator) */
/* Используется высокая специфичность селектора для переопределения Bootstrap без !important */
a.menu-item.list-group-item.list-group-item-action,
.menu-item.list-group-item.list-group-item-action {
    padding: 0;
    font-weight: normal; /* Дефолтный вес шрифта, переопределяет Bootstrap */
    min-height: 3rem; /* Минимальная высота пункта меню */
    display: flex; /* Flex-контейнер для выравнивания элементов в одну строку */
    align-items: stretch; /* Растягиваем дочерние элементы для корректной работы tooltips */
    gap: 0; /* Без зазора между элементами */
    /* Прозрачный фон для просвечивания divider */
    background-color: transparent;
}

/* Основная часть (иконка + текст) - получает все паддинги для корректной работы tooltip */
.menu-item-main {
    display: flex;
    align-items: center;
    flex: 1;
    min-width: 0; /* Для корректного обрезания текста */
    padding: 1rem; /* py-1rem px-1rem - полные паддинги Bootstrap list-group-item */
}

/* Восстанавливаем подсветку при наведении (более прозрачная) */
.dropdown-menu-container .menu-item:hover,
a.menu-item.list-group-item.list-group-item-action:hover,
.menu-item.list-group-item.list-group-item-action:hover {
    background-color: var(--color-focus-bg); /* Используем полупрозрачный цвет фокуса для более светлой подсветки */
}

/* Контейнер иконки - фиксированная ширина для выравнивания текста */
.menu-item-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 2em; /* Фиксированная ширина 2em */
    flex-shrink: 0;
    padding: 0; /* Паддинги перенесены на .menu-item-main */
    /* margin-right: -2rem; */
}

/* Изображения в иконках меню */
.menu-item-icon img {
    width: 20px;
    height: 20px;
    object-fit: contain;
}

/* Для невыбранных состояний команд (opacity-25) используем обычный цвет текста */
.menu-item-icon i.opacity-25 {
    color: var(--bs-body-color);
}

/* Иконки недоступных пунктов меню */
.menu-item.disabled .menu-item-icon,
a.menu-item.list-group-item.list-group-item-action.disabled .menu-item-icon,
.menu-item.list-group-item.list-group-item-action.disabled .menu-item-icon {
    opacity: 0.5;
}

.menu-item.disabled .menu-item-icon i,
.menu-item.disabled .menu-item-icon img,
a.menu-item.list-group-item.list-group-item-action.disabled .menu-item-icon i,
a.menu-item.list-group-item.list-group-item-action.disabled .menu-item-icon img {
    opacity: 0.5;
}

/* Контейнер пункта меню - теперь без паддингов, так как они перенесены на .menu-item-main */
.menu-item-label {
    flex-grow: 1;
    padding: 0; /* Паддинги перенесены на .menu-item-main */
    font-weight: normal; /* Дефолтный вес шрифта, переопределяет Bootstrap */
    line-height: 1rem;
}

/* Подзаголовок пункта меню (вторая строка) */
.menu-item-subtitle {
    display: block;
    color: var(--bs-secondary-color);
    font-size: 0.875rem; /* small */
    margin-top: 0.25rem;
    line-height: 1rem;
}

/* Стили для меню поиска */
.cg-search-dropdown .menu-item-label {
    font-weight: 600; /* Тикеры болдом */
}

.cg-search-dropdown .menu-item-label > div {
    display: inline; /* Тикер в одну строку с subtitle */
    font-weight: 600; /* Тикер болдом */
}

.cg-search-dropdown .menu-item-subtitle {
    display: inline; /* Subtitle в одну строку с тикером */
    margin-left: 0.5rem; /* Отступ между тикером и subtitle */
    margin-top: 0; /* Убираем отступ сверху */
}

.cg-search-dropdown .menu-item-label {
    overflow: hidden; /* Обрезка при нехватке места */
    text-overflow: ellipsis; /* Многоточие в конце */
    white-space: nowrap; /* Запрет переноса строки */
}

/* Если иконки нет, паддинги уже на .menu-item-main, поэтому это правило не нужно */

/* Отметка/указатель - получает вертикальные паддинги и правый для корректной работы tooltip */
.menu-item-indicator {
    margin-left: auto;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 3em; /* Фиксированная ширина 3em */
    flex-shrink: 0;
    padding-top: 1rem; /* Вертикальные паддинги как у основной части */
    padding-bottom: 1rem;
    padding-left: 0;
    padding-right: 1rem; /* Правый паддинг для корректной зоны tooltip */
    opacity: 0.7;
}


/* Статусы */
.indicator-status {
    /* Базовые стили для статусов */
}

.indicator-selected {
    color: var(--color-success);
}

.indicator-disabled {
    color: var(--bs-secondary-color);
}

.indicator-loading {
    color: var(--bs-primary);
}

.indicator-warning {
    color: var(--color-warning);
}

.indicator-error {
    color: var(--color-danger);
}

.indicator-not-in-table {
    color: var(--bs-body-color);
    opacity: 0.5; /* Полупрозрачный цвет для монет, которых нет в таблице */
}

/* Переходы */
.indicator-navigation {
    color: var(--bs-secondary-color);
}

.indicator-submenu {
    /* Стрелка вправо для вложенного меню */
}

.indicator-external {
    /* Иконка внешней ссылки */
}

.indicator-modal {
    /* Иконка модального окна */
}

